<div
  class="w-full max-w-3xl mx-auto p-3 sm:p-8 border rounded-2xl bg-white shadow-xl text-center flex flex-col max-h-none sm:max-h-[90vh]"
>
  <p class="text-2xl font-bold text-purple-600 mb-4">GitHub Profile</p>

  <div class="flex justify-center mb-4">
    @if (user()?.avatar_url) {
    <img
      class="rounded-full border-4 border-purple-300 shadow-md"
      width="200"
      [src]="user()?.avatar_url"
      alt="User avatar"
    />
    } @else {
    <img
      class="rounded-full border-4 border-gray-300 shadow-md"
      width="200"
      src="pngegg.png"
      alt="Fallback avatar"
    />
    }
  </div>

  <a
    [href]="user()?.html_url"
    class="text-lg font-semibold text-gray-800 hover:text-purple-600 hover:underline block mb-2"
    target="_blank"
  >
    {{ user()?.login }}
  </a>

  <p class="text-sm text-gray-600 italic mb-4">{{ user()?.bio }}</p>

  <!-- Dados extras -->
  <div
    class="flex flex-wrap justify-center items-center gap-3 text-gray-700 mb-4"
  >
    <div class="flex items-center gap-2">
      <img src="followers.svg" class="w-5 h-5" />
      <span class="text-sm">{{ user()?.followers }} Followers</span>
      ¬∑
      <span class="text-sm">{{ user()?.following }} Following</span>
    </div>
  </div>

  @if (user()?.company) {
  <div class="flex justify-center items-center gap-2 mt-3 text-gray-700">
    <img src="company.svg" class="w-5 h-5" />
    <a
      [href]="'https://github.com/' + user()?.company?.replace('@', '')"
      class="text-sm hover:text-purple-600 hover:underline"
      target="_blank"
    >
      {{ user()?.company }}
    </a>
  </div>
  } @if (user()?.location) {
  <div class="flex justify-center items-center gap-2 mt-3 text-gray-700">
    <img src="location.svg" class="w-5 h-5" />
    <span class="text-sm">{{ user()?.location }}</span>
  </div>
  } @if (user()?.email) {
  <div class="flex justify-center items-center gap-2 mt-3 text-gray-700">
    <img src="email.svg" class="w-5 h-5" />
    <span class="text-sm">{{ user()?.email }}</span>
  </div>
  }

  <div class="flex justify-center items-center gap-2 mt-3 text-gray-700">
    <img src="date.svg" class="w-5 h-5" />
    <span class="text-sm"
      >Member since: {{ user()?.created_at | date : "mediumDate" }}</span
    >
  </div>

  <!-- Input + Bot√£o -->
  <div class="mt-6 flex flex-col sm:flex-row justify-center items-center gap-3">
    <input
      type="text"
      [(ngModel)]="userName"
      placeholder="Enter username"
      class="border border-gray-300 rounded-lg px-4 py-2 w-full sm:w-64 focus:outline-none focus:ring-2 focus:ring-purple-400"
      (keyup.enter)="onClick()"
    />
    <button
      (click)="onClick()"
      class="px-6 py-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600 transition-colors w-full sm:w-auto"
    >
      Search
    </button>
  </div>

  <!-- Toggle bot√£o -->
  <div class="mt-6">
    <button
      (click)="toggleRepos()"
      class="text-sm text-purple-600 hover:underline focus:outline-none"
    >
      {{ showRepos() ? "Hide" : "Show" }} Repositories
    </button>
  </div>

  <!-- Repos (condicional) -->
  @if (showRepos() && repos()?.length) {
  <div
    class="mt-6 text-left flex-grow overflow-auto rounded-lg border border-gray-200 shadow-inner
      max-h-none sm:max-h-[400px] px-1 sm:px-0"
  >
    <h2 class="text-xl font-bold mb-4 text-purple-600">Public Repositories</h2>
    <ul class="space-y-4">
      @for (repo of repos(); track repo.id) {
      <li
        class="p-4 border rounded-lg shadow-sm hover:shadow-md transition duration-200 bg-white"
      >
        <a
          [href]="repo.html_url"
          target="_blank"
          class="text-lg font-semibold text-gray-800 hover:text-purple-600 hover:underline"
        >
          {{ repo.name }}
        </a>
        @if (repo.description) {
        <p class="text-sm text-gray-600 italic mt-1">{{ repo.description }}</p>
        } @if (repo.language) {
        <div class="text-xs text-gray-500 mt-2 flex gap-4 flex-wrap">
          <span>Language: {{ repo.language }}</span>
          <span>‚òÖ {{ repo.stargazers_count }}</span>
          <span>üç¥ {{ repo.forks_count }}</span>
        </div>
        }
      </li>
      }
    </ul>
  </div>
  }
</div>
